# Roadmap

## Обработка входящего запроса
- Разобрать url, удостовериться что присутствуют все необходиые параметры. 
Если url не валидный вернуть ошибку
- Параметры собрать в структуру и отвалидировать (middleware?).
width, height - integer (ограничить максимальным размером?)
URL изображения - string, подумать как отвалидировать url (RegEx?)
ошибки валидации кидать с 422 кодом

## LRU cache
- Реализован в одной из домашек
- Ключ - url из запроса
- Значение - путь к сохраненной картинке
- При выталкивании элемента из кеша, необходимо предварительно взять выталкиваемый 
элемент и дропнуть относящееся к нему изображение с диска

## Проксирующий сервис
- http клиент
- запрос по url, пытаемся скачать картинку
В случае ошибки, логируем и отдаем 502
- Анализируем скачанный конктент: если не картинка, если слишком большой файл, 
если не поддерживаемый формат - шлем 422?
- Выполняем обрезку полученного изображения и сохраняем его в папку на диск, коадем в кеш

## Генерация ответа
- В случае, если по указанному url, картинка присутствует в кеше, достаем из него путь до картинки на диске
- В случае, если по указанному url, картинка отсутствует в кеше, выполняем проксирующий запрос и 
сохраняем картинку на диске ив кеше. Затем отдаем путь до картинки на диске
- Генерируем респонс взяв картинку по указанному пути с диска

## Storage
Простенький сервис для манипуляции с файлами
- Должен уметь сохранять полученную картинку на диск (возвращает путь)
- Должен уметь удалять картинку с диска (принимает на вход путь)

## На подумать
- Оценить время, необходимое для генерации превьюшки. Возможно необходимо будет прикрутить очередь и ответ - заглушку